(()=>{"use strict";var e={661:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.drodDowncurrenElement=void 0;const o=n(980),l=n(540),r=n(898),i=n(641);t.drodDowncurrenElement=function(){if(i.globalVars.pause)return;(0,o.observeRows)();let e=[];if(e=(0,l.down)(e,i.globalVars.currenActiveELement),e.some((e=>null==e[0]))||e.some((e=>e[0].classList.contains("boxFixed")))){i.globalVars.currenActiveELement.forEach((e=>{e.classList.add("boxFixed")}));let{elements:e,paint:t}=(0,r.getRandonElement)();return i.globalVars.currenActiveELement=e,void t(e)}i.globalVars.currenActiveELement=e.map((e=>e[0]));for(let t=0;t<e.length;t++){let n=e[t];n[0].classList.add(n[1])}}},898:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRandonElement=void 0;const o=n(441),l=n(279),r=n(162),i=n(395),s=[o.generateSquare,l.generateLine,r.generateT,i.generateL];t.getRandonElement=function(){const e=Math.floor(Math.random()*s.length);return s[e](7,0)}},395:(e,t)=>{function n(e){e.forEach((e=>{e.classList.add("l")}))}Object.defineProperty(t,"__esModule",{value:!0}),t.paint=t.generateL=void 0,t.generateL=function(e,t){let o=[],l=document.getElementById("col_"+t+"_"+(e-1)),r=document.getElementById("col_"+t+"_"+e),i=document.getElementById("col_"+t+"_"+(e+1)),s=document.getElementById("col_"+(1+t)+"_"+(e+1));return o.push(l,r,i,s),{elements:o,paint:n}},t.paint=n},279:(e,t)=>{function n(e){e.forEach((e=>{e.classList.add("line")}))}Object.defineProperty(t,"__esModule",{value:!0}),t.paintLine=t.generateLine=void 0,t.generateLine=function(e,t){let o=[],l=document.getElementById("col_"+t+"_"+e),r=document.getElementById("col_"+(t+1)+"_"+e),i=document.getElementById("col_"+(t+2)+"_"+e),s=document.getElementById("col_"+(t+3)+"_"+e);return o.push(l,r,i,s),{elements:o,paint:n}},t.paintLine=n},441:(e,t)=>{function n(e){e.forEach((e=>{e.classList.add("square")}))}Object.defineProperty(t,"__esModule",{value:!0}),t.paint=t.generateSquare=void 0,t.generateSquare=function(e,t){let o=[],l=document.getElementById("col_"+t+"_"+e),r=document.getElementById("col_"+t+"_"+(e+1)),i=document.getElementById("col_"+(1+t)+"_"+e),s=document.getElementById("col_"+(1+t)+"_"+(e+1));return o.push(l,r,i,s),{elements:o,paint:n}},t.paint=n},162:(e,t)=>{function n(e){e.forEach((e=>{e.classList.add("t")}))}Object.defineProperty(t,"__esModule",{value:!0}),t.paint=t.generateT=void 0,t.generateT=function(e,t){let o=[],l=document.getElementById("col_"+t+"_"+(e-1)),r=document.getElementById("col_"+t+"_"+e),i=document.getElementById("col_"+t+"_"+(e+1)),s=document.getElementById("col_"+(1+t)+"_"+e);return o.push(l,r,i,s),{elements:o,paint:n}},t.paint=n},641:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.globalVars=void 0,t.globalVars={pause:!1,sizeGameAreaX:15,sizeGameAreaY:20,currenActiveELement:[]}},907:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initGrid=void 0,t.initGrid=(e,t)=>{let n=document.createElement("div");n.classList.add("container");for(let o=0;o<t;o++){let t=document.createElement("div");t.classList.add("row"),t.id="row"+o;for(let n=0;n<e;n++){let e=document.createElement("div");e.classList.add("col"),e.id="col_"+o+"_"+n,t.appendChild(e)}n.appendChild(t)}document.body.appendChild(n)}},893:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initGrid=void 0;const o=n(907);Object.defineProperty(t,"initGrid",{enumerable:!0,get:function(){return o.initGrid}})},190:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.handleKeyEvents=void 0;const o=n(770),l=n(254),r=n(408),i=n(661),s=n(641);t.handleKeyEvents=function(){document.addEventListener("keydown",(function(e){if("ArrowLeft"===e.code)s.globalVars.currenActiveELement=(0,o.moveLeft)(s.globalVars.currenActiveELement);else if("ArrowRight"===e.code)s.globalVars.currenActiveELement=(0,l.moveRight)(s.globalVars.currenActiveELement);else if("ArrowDown"===e.code)(0,i.drodDowncurrenElement)();else if("Space"===e.code){if(s.globalVars.currenActiveELement[0].classList.contains("boxFixed"))return s.globalVars.currenActiveELement;s.globalVars.currenActiveELement=(0,r.rotateFigure)(s.globalVars.currenActiveELement)}}))}},540:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.down=void 0;const o=n(814);t.down=function(e,t){for(let n=0;n<t.length;n++){let l=t[n],{type:r,nextElement:i}=(0,o.getNextElementToPrintDown)(l),s=[document.getElementById(i),r];e.push(s),l.classList.remove(r)}return e}},814:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getNextElementToPrintDown=void 0,t.getNextElementToPrintDown=function(e){let t=e.id,n=e.classList[1],o=parseInt(t.split("_")[2]);return{type:n,nextElement:"col_"+(parseInt(t.split("_")[1])+1)+"_"+o}}},770:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.moveLeft=void 0;const o=n(40);function l(e,t){e.forEach((e=>{e.classList.add(t)}))}t.moveLeft=function(e){const t=function(e){return(0,o.newElementLeft)([],e)}(e);return function(e){return e.map((e=>e[0])).some((e=>null==e||e.classList.contains("boxFixed")))}(t)?(l(e,t[0][1]),e):(l(e=function(e){return e.map((e=>e[0]))}(t),t[0][1]),e)}},40:(e,t)=>{function n(e){let t=e.id,n=e.classList[1],o=parseInt(t.split("_")[2]);return{type:n,nextElement:"col_"+parseInt(t.split("_")[1])+"_"+(o-1)}}Object.defineProperty(t,"__esModule",{value:!0}),t.newElementLeft=t.getNextElementToPrintLeft=void 0,t.getNextElementToPrintLeft=n,t.newElementLeft=function(e,t){for(let o=0;o<t.length;o++){let l=t[o],{type:r,nextElement:i}=n(l),s=[document.getElementById(i),r];e.push(s),l.classList.remove(r)}return e}},254:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.moveRight=void 0;const o=n(957);function l(e,t){e.forEach((e=>{e.classList.add(t)}))}t.moveRight=function(e){const t=function(e){return(0,o.newElementRight)([],e)}(e);return function(e){return e.map((e=>e[0])).some((e=>null==e||e.classList.contains("boxFixed")))}(t)?(l(e,t[0][1]),e):(l(e=function(e){return e.map((e=>e[0]))}(t),t[0][1]),e)}},957:(e,t)=>{function n(e){let t=e.id,n=e.classList[1],o=parseInt(t.split("_")[2]);return{type:n,nextElement:"col_"+parseInt(t.split("_")[1])+"_"+(o+1)}}Object.defineProperty(t,"__esModule",{value:!0}),t.newElementRight=t.getNextElementToPrintRight=void 0,t.getNextElementToPrintRight=n,t.newElementRight=function(e,t){for(let o=0;o<t.length;o++){let l=t[o],{type:r,nextElement:i}=n(l),s=[document.getElementById(i),r];e.push(s),l.classList.remove(r)}return e}},408:(e,t)=>{function n(e,t){return t.every((e=>null!==e&&!e.classList.contains("boxFixed")))}function o(e,t,n){const o=n?"add":"remove";e.forEach((e=>e.classList[o](t)))}function l(e,t){return document.getElementById("col_"+e+"_"+t)}Object.defineProperty(t,"__esModule",{value:!0}),t.rotateFigure=t.isValidRotation=void 0,t.isValidRotation=n,t.rotateFigure=function(e){const t=e[0].classList[1],r=e.map((e=>{const[t,n]=function(e){const t=e.split("_");return[parseInt(t[1]),parseInt(t[2])]}(e.id);return{y:t,x:n}}));let i=[];if("line"===t)i=r[0].x===r[1].x?[1,0,-1,-2].map((e=>l(r[1].y,r[1].x+e))):[-1,0,1,2].map((e=>l(r[1].y+e,r[1].x)));else if("t"===t){let e={y:r[1].y,x:r[1].x};i=r.map((t=>l(e.y+(t.x-e.x),e.x-(t.y-e.y))))}else if("l"===t){let e={y:r[1].y,x:r[1].x};i=r.map((t=>l(e.y+(t.x-e.x),e.x-(t.y-e.y))))}return n(0,i)?(o(e,t,!1),o(i,t,!0),i):e}},980:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.observeRows=void 0;const o=n(128),l=n(641);t.observeRows=function(){const e=document.getElementsByClassName("container")[0].childNodes;let t=0;if(e.forEach(((e,n)=>{var l;(l=e).childNodes.length===l.getElementsByClassName("boxFixed").length&&((0,o.removeRowFixed)(n),t++)})),0!=t)for(let e=0;e<t;e++){const e=document.getElementsByClassName("boxFixed");for(let t=e.length-1;t>=0;t--){const n=e[t],[o,r]=n.id.split("_").slice(1);if(Number(r)>l.globalVars.sizeGameAreaY-1)continue;const i=document.getElementById(`col_${Number(o)+1}_${Number(r)}`);console.log(i),console.log(`col_${Number(o)+1}_${Number(r)}`),i.classList.contains("boxFixed")||(i.classList.add("boxFixed"),n.classList.remove("boxFixed"))}}}},840:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.observerPause=void 0;const o=n(641);t.observerPause=function(){document.getElementById("pause").addEventListener("click",(function(){o.globalVars.pause?(o.globalVars.pause=!1,document.getElementById("pause").innerHTML="Pause"):(o.globalVars.pause=!0,document.getElementById("pause").innerHTML="Play")}))}},128:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeRowFixed=void 0,t.removeRowFixed=function(e){document.getElementsByClassName("container")[0].childNodes[e].childNodes.forEach((e=>{e.classList.remove("boxFixed")}))}}},t={};function n(o){var l=t[o];if(void 0!==l)return l.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}(()=>{const e=n(898),t=n(893),o=n(840),l=n(190),r=n(661),i=n(641);(0,t.initGrid)(i.globalVars.sizeGameAreaX,i.globalVars.sizeGameAreaY);let{elements:s,paint:a}=(0,e.getRandonElement)();i.globalVars.currenActiveELement=s,a(s),setInterval((()=>(0,r.drodDowncurrenElement)()),700),(0,l.handleKeyEvents)(),(0,o.observerPause)()})()})();
//# sourceMappingURL=app.js.map